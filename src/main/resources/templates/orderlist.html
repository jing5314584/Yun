<!DOCTYPE html>
<!-- saved from url=(0033)https://t.flowerplus.cn/my/orders -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <meta name="keywords" content="花+,花加,flowerplus,鲜花,鲜花订阅">
        <meta name="description" content="一周一花，用鲜花点亮生活,提供98元单品鲜花包月服务、168元混合鲜花包月服务和花艺周边配件、花艺课程服务。">
        <meta name="format-detection" content="telephone=no">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        
        <title>花语-订单列表</title>
        <script charset="utf-8" src="/js/v.js"></script>
        <script src="/js/hm.js"></script>
        <script async="" src="/js/sensorsdata.min.js" charset="UTF-8"></script>
        <script>
            var _web_base="https://t.flowerplus.cn/".replace(/^https?:/,window.location.protocol);
            //document.domain="flowerplus.cn";
        </script>
        <link rel="stylesheet" href="/css/main.css">
        <!-- <script src="./FlowerPlus花加_files/jweixin-1.2.0.js"></script> -->
        <script src="/js/main.js"></script>
        
        
<link rel="stylesheet" type="text/css" href="/css/base.css">
<link rel="stylesheet" type="text/css" href="/css/myOrders.css">

    </head>
    <body ontouchstart=""><script src="/js/bl.js" crossorigin=""></script>
        

                    <div class="page">
                        
<style type="text/css">
    .flowerGift,.flowerGift:active{
        position: relative;
        display: block;
        text-align: center;
        width: 100%;
        background: url(https://oss.flowerplus.cn/oss_png/2018-01-15/15159998036359.png) no-repeat center;
        height: 96px;
        background-size: 375px 96px;
        color:#333;
        border-bottom: 8px #f0f0f0 solid;
    }
    .mainColor{
        color: #f6325b;
    }
    .mainColor:after{
        border-color: #f6325b !important;
    }
    .color999{
        color: #999;
    }
    .pinfo-num{
        color: #999;
        font-size: 12px;
    }
    .f12{
        font-size: 12px;
    }
    .pinfo-sku1{
        margin: 15px 75px 0 75px;
        color: #aaa;
        font-size: 12px;
    }
    .delayAlert{
        width: 120px;
        height: 50px;
        background: url("https://oss.flowerplus.cn/oss_png/2018-04-19/15241229208713.png") no-repeat;
        background-size: 100%;
        position: absolute;
        padding: 8px;
        color: #ED952C;
        font-size: 10px;
        bottom: -7px;
        z-index: 1;
        left: 16px;
        border-radius: 2px 2px 2px 0;
    }
/*     .delayAlert::after{
    content: '';
    position: absolute;
    border-top: 5px solid #F08232;
    border-right: 5px solid transparent;
    border-bottom: 5px solid transparent;
    border-left: 5px solid #F08232;
    bottom: -7px;
    left: 0;
} */
    .closeDelayAlert{
        width: 32px;
        height: 32px;
        position: absolute;
        right: -16px;
        top:-16px;
        background: url('https://oss.flowerplus.cn/oss_png/2018-04-19/15241228334649.png') no-repeat center center;
        background-size: 17px;
    }
</style>
    <div id="noorders">
        <img src="/images/15157266702670.png">
                            <p style="margin-top:30px;font-size: 12px;color:#999;">您还没有自己的订单</p>
                        </div>
<!-- <div id="loadingdetail">加载中</div> -->
<ul class="header flex row-h40 tc bgWhite fixed">
    <li id="tab0" data-status="0" data-page="0">全部</li>
    <li id="tab1" data-status="1" data-page="0">待付款</li>
    <li id="tab2" data-status="2" data-page="0">服务中</li>
    <li id="tab4" data-status="4" data-page="0">待评价</li>
    <li id="tab3" data-status="3" data-page="0">已完成</li>
</ul>
		<div class="wrap-page" style="top:48px;">
			<!-- <a href="/my/orders/?status=100&gift_status=" class="flowerGift" style="display:none">
        <p class="tc link">查看TA送给您的礼物></p>
        <p class="giftNum hide" id="giftCount"></p>
    </a> -->
			<div class="orderlist" id="orderlist0">
				<!-- <dl class="order-list">
					<dt>
						2018.05.23<span class="aright"><span class="mainColor">交易取消</span></span>
					</dt>
					<dd class="pinfo-wrap rlt" data-id="13692593" data-sid="undefined"
						data-oid="undefined" data-type="undefined">
						<div class="pinfo-content">
							<div class="pinfo-image">
								<img src="/images/15248828984099.jpg">
							</div>
							<div class="pinfo-title">【新客专享3人团】太阳花闪购</div>
							<div class="pinfo-sku1">产品:非洲菊;指定日期:5月26日;赠品:夏季保鲜花卡*1</div>
							<div class="pinfo-price">￥24.90</div>
							<div class="pinfo-num">×1</div>
						</div>
						<div class="total_pay">共1件商品&nbsp;&nbsp;&nbsp;实付:￥24.90</div>
					</dd>
					<dd>
						<span class="aright bottomAright"><button class="border1pxgray cancel_order" data-oid="'+item.id+'">取消订单</button></span>
					</dd>
				</dl>
				<dl class="order-list">
					<dt>
						2018.05.23<span class="aright"><span class="color999">交易取消</span></span>
					</dt>
					<dd class="pinfo-wrap rlt" data-id="13692586" data-sid="undefined"
						data-oid="undefined" data-type="undefined">
						<div class="pinfo-content">
							<div class="pinfo-image">
								<img src="/images/15248828984099.jpg">
							</div>
							<div class="pinfo-title">【新客专享3人团】太阳花闪购</div>
							<div class="pinfo-sku1">产品:非洲菊;指定日期:5月26日;赠品:夏季保鲜花卡*1;赠品:Ocean花瓶*1</div>
							<div class="pinfo-price">￥24.90</div>
							<div class="pinfo-num">×1</div>
						</div>
						<div class="total_pay">共1件商品&nbsp;&nbsp;&nbsp;实付:￥24.90</div>
					</dd>
					<dd>
						<span class="aright bottomAright"><button class="border1pxgray cancel_order" data-oid="'+item.id+'">取消订单</button><button class="border1px go_pay mainColor" data-id="'+item.id+'">&nbsp;去支付</button></span>
					<span class="aright bottomAright"><button class="border1pxgray delete_order" data-oid="'+item.id+'">删除订单</button></span>
					</dd>
				</dl> -->
			</div>
		</div>

		<div id="loading" style="display: none;">加载中...</div>
<script type="text/javascript" src="/js/util.js"></script>
<script>
    var delayId = FP.getLocalStorage('delayId',true);
    delayIdArry = delayId ? delayId.split(',') : [];
    var uid = "11255299";

    if(uid == '380' || uid == '6025' || uid == '2092126'){

        window.onerror = function(msg, url, line, col, error){
            alert(msg+"["+line+":"+col+"]"+error);
        }
        //alert($);
    }
    var loadPage=0,isloading = isLoadAll =false,totalheight = 0, pageStatus = 0, u_from="", gift_status = '0';
 
    var status = "";
    status && (pageStatus = status);
    if(gift_status == 100){
        $('.header').hide();
        $('.wrap-page').css('top','0');
    }
    pageStatus = GetQueryString("type");
    $('.header li').each(function(){
        if($(this).attr('data-status') == pageStatus){
            $(this).addClass('current');
        }
    })
    
    $(window).scroll(function(){
        if ($(document).scrollTop() >= $(document).height()-$(window).height()) {
            getList(pageStatus);
        }
    })
    getList(pageStatus);
    $('.header li').on("click",function(){
    	
        if($(this).hasClass('current')) return;
        $(this).addClass('current').siblings('li').removeClass('current');
        $('.orderlist').html('');
        $('#noorders').hide();
        pageStatus = $(this).attr('data-status');
        getList(pageStatus);
    });

    function getList(status){
    	$('.orderlist').html('');
        FP.loading().show();
        $.ajax({
            url: "getorderlist",
            type: "POST",
            data: {
            	"type":status
            },
            async: false,
            success: function (data) {
            	FP.loading().hide();
                console.log("GetProducts",data.data);
                $.each(data.data, function(i, order) {
                	$('.orderlist').append(
                			"<dl class=\"order-list\">"+
        					"<dt>"+order.createTimeFormat+"<span class=\"aright\"><span class=\"mainColor\">交易取消</span></span>"+
        					"</dt>"+
        					"<dd class=\"pinfo-wrap rlt\" data-id=\""+order.id+"\" data-oid=\"undefined\" data-type=\"undefined\">"+
        						"<div class=\"pinfo-content\">"+
        							"<div class=\"pinfo-image\">"+
        								"<img with=\"64px\" height=\"64px\" src=\""+order.goodsImg+"\">"+
        							"</div>"+
        							"<div class=\"pinfo-title\">"+order.goodsName+"</div>"+
        							"<div class=\"pinfo-sku1\">"+order.goodsBrief+"</div>"+
        							"<div class=\"pinfo-price\">￥"+order.price/100+"</div>"+
        							"<div class=\"pinfo-num\">×1</div>"+
        						"</div>"+
        						"<div class=\"total_pay\">共1件商品&nbsp;&nbsp;&nbsp;实付:￥"+order.price/100+"</div>"+
        					"</dd>"+
        				"</dl>"
                	);
                });
            }
        });
        
        
        
        
        /* FP.ajaxGet('/my/getorderlist',{next:loadPage,status:status,u_from:u_from,gift_status:gift_status},function(v){
            loadPage = v.next;
            FP.loading().hide();
            var str = '';
            if(v.list.length==0 && loadPage == 0){
                $("#noorders").show();
            }
            var countdownList = [];
            $.each(v.list,function(index,item){
                var bottomBtn = '';
                var addbuy = '';
                var gstatus = '';
                var strr = '';
                var delayText = '';
                var created = item.created ? item.created.split(' ')[0].replace(/-/g,'.') : '';
                var colorName = item.status == 'TRADE_CLOSED_BY_USER' || item.status == 'TRADE_CLOSED' ? 'color999' : 'mainColor';
                var statusText = '<span class="'+colorName+'">'+item.statusName+'</span>';
                var addgoods = item.addbuy ? item.addbuy : [];
                for (var i = 0; i < addgoods.length; i++) {
                    addbuy +='<div class="pinfo-content"><div class="pinfo-image">'+
                    '<img src="'+addgoods[i].image+'">'+
                    '</div><div class="pinfo-title">'+addgoods[i].name+'</div>'+
                    '<div class="pinfo-num">×'+addgoods[i].num+'</div></div>'
                }
                switch (item.status){
                    case 'WAIT_PAY':
                        var t = item.close_time;
                        if (t<0) {
                            bottomBtn = '<button class="border1pxgray cancel_order" data-oid="'+item.id+'">取消订单</button>';
                        }else{
                            countdownList.push({
                                'id' : item.id,
                                'index' : index,
                                'val' : t,
                                'status' : status
                            });
                            var h = Math.floor(t / 60 / 60);
                            h = h < 10 ? "0" + h : "" + h;
                            var m = Math.floor((t - h * 60 *60)/60);
                            m = m < 10 ? "0" + m : "" + m;
                            var s = (t - m * 60 - h *60*60 )
                            s = s < 10 ? "0" + s : "" + s;
                            var str_h = '';
                            if(h >0){
                                str_h += '<span class="time hours">'+h+'h</span>:';
                            }
                            statusText = '<div class="mainColor timer" style="display: inline-block;">'+str_h+'<span class="time minuts">'+m+'m</span>:<span class="time seconds">'+s+'s</span><span class="btn-pay">  待付款</span></div>';
                            bottomBtn = '<button class="border1pxgray cancel_order" data-oid="'+item.id+'">取消订单</button><button class="border1px go_pay mainColor" data-id="'+item.id+'">&nbsp;去支付</button>'
                        }
                        break;
                    case 'WAIT_COMM':
                        gstatus = '<span class="confirm-price f12">'+item.str+'</span>';
                        if (item.type == 1) {
                            bottomBtn = '<a href="/my/new_ships_judge?sid='+item.sid+'&oid='+item.oid+'" class="border1pxgray mainColor" data-oid="'+item.sid+'">去评价</a>'
                        }else if (item.shipStatus) {
                            if(item.shipStatus.status == 2){
                                bottomBtn = '<a href="/my_judge/do_judge?oid='+item.oid+'" class="border1pxgray mainColor" data-oid="'+item.oid+'">去评价</a>'
                            }

                        }
                        break;
                    case 'IN_SERVICE':
                        if (item.shipStatus) {
                            
                            gstatus = '<div class="confirm-price f12">'+item.shipStatus.str+'<div class="mainColor f12">'+item.shipStatus.str2.replace(/-/g,'.')+'</div></div>';
                            if (item.shipStatus.status == 1) {
                                bottomBtn = '<button class="border1pxgray checkLogistics" data-sid="'+item.shipStatus.sid+'">查看物流进度</button>'
                            }else if (item.shipStatus.status == 2) {   //礼物订单（10）不显示一键续订
                                if (item.isMonth == 1) {
                                    bottomBtn = '<button class="border1pxgray checkLogistics" data-sid="'+item.shipStatus.sid+'">查看物流进度</button><button class="border1px renewIt" data-id="'+item.id+'" data-secretid="'+item.secret_id+'">一键续订</button>'
                                }else{
                                    bottomBtn = '<button class="border1pxgray checkLogistics" data-sid="'+item.shipStatus.sid+'">查看物流进度</button>';
                                }

                            }else if (item.shipStatus.status == 3 && item.isMonth == 1) {
                                bottomBtn = '<button class="border1pxgray renewIt" data-id="'+item.id+'" data-secretid="'+item.secret_id+'">一键续订</button>'
                            }else if (item.shipStatus.status == 5 && item.isMonth == 1) {
                                bottomBtn = '<button class="border1pxgray renewIt" data-id="'+item.id+'" data-secretid="'+item.secret_id+'">一键续订</button>'
                            }else{
                                bottomBtn = '<button class="border1pxgray butplace" data-id="'+item.id+'">修改地址</button><button class="border1pxgray buttime" data-id="'+item.id+'">修改时间</button>';
                            }
                            if (item.shipStatus.yanqi) {
                                delayText = '<div class="delayAlert" delayId="'+item.id+'">因五一假期影响,原'+item.shipStatus.yanqi.old_delivery_date+'收花延期至'+item.shipStatus.yanqi.new_delivery_date+'<div class="closeDelayAlert" delayId="'+item.id+'"></div></div>'
                            }
                        }
                        break;
                    case 'TRADE_CLOSED':
                        bottomBtn = '<button class="border1pxgray delete_order" data-oid="'+item.id+'">删除订单</button>';
                        break;
                    case 'PAUSE_SERVICE':
                        if(item.isRefunding){
                            bottomBtn = '<button class="border1pxgray check_refund" data-id="'+item.rid+'">查看退款进度</button>';
                        }
                        break;
                    case 'TRADE_FINISH':
                        if (item.isMonth == 1) {
                            bottomBtn = '<button class="border1pxgray renewIt" data-id="'+item.id+'" data-secretid="'+item.secret_id+'">一键续订</button>'
                        }
                        break;
                }

                var price = '<div class="pinfo-price">￥'+item.price+'</div>';



                if(item.out_name==='CODE'){
                     price = '';
                }

                var total_fee = '实付:￥'+item.payment;

                //银联活动产品价格隐藏@upactivity
                if(item.up_activity_product == 1){
                    price = total_fee =  '';
                }

                str += '<dl class="order-list">'+
                    '<dt>'+created+'<span class="aright">'+statusText+'</span></dt>'+
                    '<dd class="pinfo-wrap rlt" data-id="'+item.id+'" data-sid="'+item.sid+'" data-oid="'+item.oid+'" data-type="'+item.type+'">'+delayText+
                        '<div class="pinfo-content">'+
                            '<div class="pinfo-image"><img src="'+item.pic_path.replace(/^http:\/\//,'//')+'"></div>'+
                            '<div class="pinfo-title">'+item.title+'</div>'+
                            '<div class="pinfo-sku1">'+item.sku_properties_name+'</div>'+
                            price+
                            '<div class="pinfo-num">×'+item.num+'</div>'+
                        '</div>'+addbuy+
                        '<div class="total_pay">共'+item.count_p+'件商品&nbsp;&nbsp;&nbsp;'+total_fee+'</div>'+
                    '</dd>'+
                    '<dd>'+gstatus+'<span class="aright bottomAright">'+bottomBtn+'</span>'+
                    '</dd>'+
                '</dl>'+strr
            });
            if(countdownList.length > 0) {
                countdown(countdownList);
            }
            $('.orderlist').append(str);
            if(loadPage==0){
                $("#loading").hide();
                isLoadAll = true
            }
            isloading=false;
            $('.cancel_order').off(FP.clickEvent).on(FP.clickEvent, function (e) { //取消订单
                if(isloading) return;
                if(confirm('确定要取消该订单吗?')){
                    isloading = true;
                    FP.ajaxPost('/my/cancelorder', {id:$(this).attr('data-oid')
                    }, function (v) {
                        isloading = false;
                        window.location.reload();
                    }, function () {
                        isloading = false;
                        FP.showError("请重试");
                    });
                }
            });
            $('.delete_order').off(FP.clickEvent).on(FP.clickEvent, function (e) { //删除订单
                if(isloading) return;
                var obj = $(this);
                if(confirm('确定要删除该订单吗?')){
                    isloading = true;
                    FP.ajaxPost('/my/delOrder', {oid:$(this).attr('data-oid')
                    }, function (v) {
                        isloading = false;
                        if(v.f){
                            obj.closest('.order-list').remove();
                        }
                    }, function () {
                        isloading = false;
                        FP.showError("请重试");
                    });
                }
            });
            $('.checkLogistics').off(FP.clickEvent).on(FP.clickEvent, function (e) { //查看物流
                location.href = '/my/shipitem/?id='+$(this).attr('data-sid')+'&gift_status='+ gift_status;
            });
            $('.renewIt').off(FP.clickEvent).on(FP.clickEvent, function (e) { //一键续订
                var obj = $(this);
                var secretid = obj.attr('data-secretid');
                if (!secretid || secretid == "null" || secretid == null) {
                    location.href = '/';
                }else{
                    location.href = '/buy/oncebuy?id='+obj.attr('data-secretid')+'&oid='+obj.attr('data-id');
                }
            });
            $('.butplace').off(FP.clickEvent).on(FP.clickEvent, function (e) { //修改地址
                location.href = '/my/orders_address?id='+$(this).attr('data-id');
            });
            $('.buttime').off(FP.clickEvent).on(FP.clickEvent, function (e) { //修改时间
                location.href = '/my/orders_time?id='+$(this).attr('data-id');
            });
            $('.check_refund').off(FP.clickEvent).on(FP.clickEvent, function (e) { //查看退款进度
                location.href = '/my/refunddetail?id='+$(this).attr('data-id');
            });
            $('.go_pay').off(FP.clickEvent).on(FP.clickEvent, function (e) { //去支付
                var id = $(this).attr("data-id");
                if (!gift_status || gift_status == 0) {
                    window.location.href="/v/my.orderdetail.html?id="+id;
                } else {
                    //礼物订单查看详情的入口
                    window.location.href="/v/my.orderdetail.html?id="+id+'&gift_status='+gift_status;
                }
            });
            $('.closeDelayAlert').off(FP.clickEvent).on(FP.clickEvent, function (e) {
                event.stopPropagation();
                $(this).parent('.delayAlert').hide();
                //delayIdArry.push($(this).attr('delayId'));
                //FP.setLocalStorage('delayId',delayIdArry,true);
            });

        },function(){
            FP.loading().hide();
            FP.showError('服务繁忙');
        }); */
    }

    function countdown(data){                       //倒计时
        var count = 0;
        var len = data.length;
        if(len == 0) return;
        calleeTimer();
        function calleeTimer(){
            var timer = setTimeout(function(){
                if(count >= len){
                    timer && clearTimeout(timer);
                    return;
                }
                var index = 0;
                for(var i = 0; i < len; i++){
                    var par = $('.order-list').eq(data[i].index);
                    if(data[i].val > 0){
                        var hour = par.find('.hours');
                        var minut = par.find('.minuts');
                        var second = par.find('.seconds');
                        var h = Math.floor(data[i].val / 60 / 60);
                        h = h < 10 ? "0" + h : "" + h;
                        var m = Math.floor((data[i].val - h * 60 * 60)/60);
                        m = m < 10 ? "0" + m : "" + m;
                        var s = (data[i].val - m * 60 -h *60*60)
                        s = s < 10 ? "0" + s : "" + s;
                        hour.text(h + 'h');
                        minut.text(m + 'm');
                        second.text(s + 's');
                        data[i].val --;
                        index ++;
                        if(index == len){
                            calleeTimer();
                        }
                    }else if(data[i].val <= 0){
                        data[i].val = '';
                        count ++;
                        par.find('.go_pay').hide();
                        par.find('.timer').hide();
                        /*FP.ajaxPost('/business_order_api/close_order',{'oid' : data[i].id},function(v){
                            location.reload();
                        });*/
                    }
                }
            },1000)
        }
    }

    /*function loaddata()
    {
        totalheight = parseFloat($(window).height()) + parseFloat($(window).scrollTop());     //浏览器的高度加上滚动条的高度

        if ($(document).height() <= totalheight+10)     //当文档的高度小于或者等于总的高度的时候，开始动态加载数据
        {
            getList(status,page);
        }
    } */

</script>

<script>
$(".orderlist").delegate(".pinfo-wrap","click",function(){
/*    var dataId = $(this).attr("data-id");
    if (!dataId || dataId == 'undefined') {
        return;
    }*/
    alert($(this).attr("data-id"));
    window.location.href="orderdetail.html?id="+$(this).attr("data-id");

})
//双十一逻辑
var sku=[];
$("#orderlist").delegate(".buy","click",function(){
    var btn=$(this);
    var btn_text=btn.html();
    var sku_id=$(this).attr('sku');
    var productid = $(this).attr('productid');
    btn.html('请求中...').addClass('buy-sending');

    var _submit=function(){
        var inputs=[];
        inputs.push($("<input>",{name:"sku",value:sku_id}));
        inputs.push($("<input>",{name:"_t",value:(new Date().getTime())}));
        setTimeout(function(){
            is_runing=false;
            btn.html(btn_text).removeClass('buy-submit-sending');
            FP.setAjaxTimeout(0);
        },300);
        $("<form>",{method:"get",action:_web_base+"buy/confirm"}).append(inputs).appendTo("body").css({opacity:0}).submit();
    }
    FP.ajaxPost(
        _web_base+"product/productstatus/",
        {id:productid},
        function(v){
            if(v.f){
                   _submit();
            }else{
                   FP.showError(v.data);
            }
            btn.html(btn_text).removeClass('buy-sending');
        },
        function(){
            _submit();
        }
    );
    return;
    $.getJSON(_web_base+"product/pstatus?id="+productid+"&callback=?", function(v){
           if(v.f){
                var inputs=[];
                inputs.push($("<input>",{name:"sku",value:sku_id}));
                inputs.push($("<input>",{name:"_t",value:(new Date().getTime())}));
                $("<form>",{method:"get",action:_web_base+"buy/confirm"}).append(inputs).submit();
           }else{
                   FP.showError(v.data);
           }
            is_runing=false;
            btn.html(btn_text).removeClass('buy-sending');
    });
});
</script>

                    </div>
        
        

<!--product-->
<!--new sa-->
<!--一下js已经被合并到main_js.html-->
<!-- <script type="text/javascript" src="//static2.flowerplus.cn/Static/js/sa/pageCategory.js?_t=20180209"></script> -->
<script type="text/javascript">

var page_type = '';
var sap = 'production';
var sau = 'https://sd.flowerplus.cn:4106/sa?project=' + sap;

(function(para) {
  var p = para.sdk_url, n = para.name, w = window, d = document, s = 'script',x = null,y = null;
  w['sensorsDataAnalytic201505'] = n;
  w[n] = w[n] || function(a) {return function() {(w[n]._q = w[n]._q || []).push([a, arguments]);}};
  var ifs = ['track','quick','register','registerPage','registerOnce','trackSignup', 'trackAbtest', 'setProfile','setOnceProfile','appendProfile', 'incrementProfile', 'deleteProfile', 'unsetProfile', 'identify','login','logout','trackLink','clearAllRegister','getAppStatus'];
  for (var i = 0; i < ifs.length; i++) {
    w[n][ifs[i]] = w[n].call(null, ifs[i]);
  }
  if (!w[n]._t) {
    x = d.createElement(s), y = d.getElementsByTagName(s)[0];
    x.async = 1;
    x.src = p;
    x.setAttribute('charset','UTF-8');
    y.parentNode.insertBefore(x, y);
    w[n].para = para;
  }
})({
  sdk_url: '//static2.flowerplus.cn/Static/js/sa/sensorsdata.min.js?_t=20171208',
  name: 'sa',
  server_url: sau,
  is_track_device_id: true,
  is_single_page: false, //单页，锚点点击或者浏览器回退是否记录浏览事件, 设置false不记录， 锚点点击单独处理
  heatmap: {
      // 关闭 $WebStay (Web 视区停留) 事件
      scroll_notice_map:'not_collect',
      // 关闭 $WebClick（Web 元素点击）事件
      clickmap:'not_collect'
  },
  // debug_mode: true,
  debug_mode_upload: false
});


    function getParamData() {
        var param_data = {};
        if (typeof fp_info !== "undefined"
          && fp_info.hasOwnProperty('pageCategory1')
          && fp_info.hasOwnProperty('pageCategory2')
          && fp_info.hasOwnProperty('pageCategory3')
        ) {
            param_data.pageCategory1 = fp_info.pageCategory1;
            param_data.pageCategory2 = fp_info.pageCategory2;
            param_data.pageCategory3 = fp_info.pageCategory3;
        }

        if (typeof _pageTaxonomy !== "undefined"
          && _pageTaxonomy.hasOwnProperty('pageCategory1')
          && _pageTaxonomy.hasOwnProperty('pageCategory2')
          && _pageTaxonomy.hasOwnProperty('pageCategory3')
        ) {
            param_data.pageCategory1 = _pageTaxonomy.pageCategory1;
            param_data.pageCategory2 = _pageTaxonomy.pageCategory2;
            param_data.pageCategory3 = _pageTaxonomy.pageCategory3;
        }

        if (page_type != '') {
            param_data.pageType = page_type;
        }

        
        
        
        
        
        return param_data;
    }

    var param_data = getParamData();

    sa.quick('autoTrackWithoutProfile', param_data);
</script>

<script type="text/javascript">
    // home page tab track $pageview
    window.addEventListener('hashchange',function(e) {
        if (location.pathname == '/') {
            // set home page hash's PageCategory3
            setHomeHashPageCategory3();

            var param_data = getParamData();
            param_data['$url'] = location.href;
            param_data['$url_path'] = location.pathname;
            param_data['$title'] = document.title;

            var referrer = "string"==typeof document.referrer?document.referrer.slice(0,100):"";
            var reg = /^http(s)?:\/\/(.*?)\//;
            var referrer_host = referrer ? reg.exec(referrer)[2] : "";

            param_data['$referrer'] = referrer;
            param_data['$referrer_host'] = referrer_host;

            sa.track('$pageview', param_data);
        }
    },false);
</script>


        <!-- <script type="text/javascript" src="//static2.flowerplus.cn/Static/js/fpa/fpa.channel.js?_t=20170907"></script> -->
<script>
var fp_utm_source = FP.getQueryString('utm_source');
if (fp_utm_source != '' && fp_utm_source != null) {
    FP.setCookie('fpa_channel_utm_source', fp_utm_source, null, '/', '.flowerplus.cn');
}
</script>


<script>
    function exist_ga(){return typeof ga == 'function';}
    function ga_buy(){if(!exist_ga())return;ga("send",{hitType:"event",eventCategory:"订购流程",eventAction:"立即购买",eventLabel:"详情页购买"})}
    function ga_submit(){if(!exist_ga())return;ga("send",{hitType:"event",eventCategory:"订购流程",eventAction:"确认下单",eventLabel:"订单填写页"})}
    function ga_cancel(){if(!exist_ga())return;ga("send",{hitType:"event",eventCategory:"订购流程",eventAction:"取消订单",eventLabel:"订单确认页"})}
    function ga_pay(id,product_name,payment){if(!exist_ga())return;ga("send",{hitType:"event",eventCategory:"订购流程",eventAction:"去支付",eventLabel:"订单确认页"});ga("require","ecommerce");ga("ecommerce:addTransaction",{"id":id,"affiliation":product_name,"revenue":payment,});ga("ecommerce:send")};
</script>

        
        

            



</body></html>